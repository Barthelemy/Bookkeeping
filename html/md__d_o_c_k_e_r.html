<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bookkeeping: Docker</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bookkeeping
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Docker </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md26"></a>
Windows Subsystem for Linux</h1>
<p>Note that there are some issue with version 2 of Windows Subsystem for Linux, so be aware. Especially the development environment has some issue due to file changes not always triggering an event inside the container.</p>
<h1><a class="anchor" id="autotoc_md27"></a>
Unsatisfiable constraints</h1>
<p>For achieving consistent builds, the dependencies you rely on must be pinned down to a specific version. Why is that? If you don't pin down version numbers, your images are dependent on the point of time when they are built. When package maintainers decide to release a new version, it will be automatically installed as soon as you rebuild your image the next time. Unfortunately Alpine Linux does not keep old packages. Thus from time to time GitHub Actions or the staging server will not built/update as the dependency (or dependencies) at that specific version cannot be found in the repository. To solve this read the error output and update the <code>Dockerfile</code> to match the newer version.</p>
<div class="fragment"><div class="line">Step 6/15 : RUN apk add --no-cache chromium=83.0.4103.61-r0</div>
<div class="line"> ---&gt; Running in 732bc1a77c88</div>
<div class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz</div>
<div class="line">fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz</div>
<div class="line">ERROR: unsatisfiable constraints:</div>
<div class="line">  chromium-83.0.4103.116-r0:</div>
<div class="line">    breaks: world[chromium=83.0.4103.61-r0]</div>
<div class="line">Service &#39;application&#39; failed to build: The command &#39;/bin/sh -c apk add --no-cache chromium=83.0.4103.61-r0&#39; returned a non-zero code: 1</div>
<div class="line">##[error]Process completed with exit code 1.</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md28"></a>
Production</h1>
<h2><a class="anchor" id="autotoc_md29"></a>
Base command</h2>
<div class="fragment"><div class="line">$ docker-compose -f docker-compose.yml</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md30"></a>
Starting the production environment</h2>
<div class="fragment"><div class="line">$ {BASE_COMMAND} up --build</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md31"></a>
Staging</h1>
<p>The <code>docker-compose.staging.yml</code> is designed to be used in a staging environment.</p>
<h2><a class="anchor" id="autotoc_md32"></a>
Base command</h2>
<div class="fragment"><div class="line">$ docker-compose -f docker-compose.yml -f docker-compose.staging.yml</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md33"></a>
Starting the staging environment</h2>
<div class="fragment"><div class="line">$ {BASE_COMMAND} up --build</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md34"></a>
Development</h1>
<p>The <code>docker-compose.dev.yml</code> is designed to be used during development.</p>
<h2><a class="anchor" id="autotoc_md35"></a>
Base command</h2>
<div class="fragment"><div class="line">$ docker-compose -f docker-compose.yml -f docker-compose.dev.yml</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md36"></a>
Starting the development environment</h2>
<div class="fragment"><div class="line">$ {BASE_COMMAND} up --build</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md37"></a>
Test</h1>
<p>The <code>docker-compose.test.yml</code> is designed to include everything that is necessary to test the application.</p>
<h2><a class="anchor" id="autotoc_md38"></a>
Base command</h2>
<div class="fragment"><div class="line">$ docker-compose -f docker-compose.yml -f docker-compose.test.yml</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md39"></a>
Execute the test suite</h2>
<div class="fragment"><div class="line">$ {BASE_COMMAND} up --build --abort-on-container-exit</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
